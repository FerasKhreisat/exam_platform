{% extends "base.html" %}
{% block title %}Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†{% endblock %}

{% block content %}

<style>
.dashboard-wrapper {
    width: 100%;
    max-width: 1100px;
}

.stat-card {
    background: radial-gradient(circle at top, #1a2340, #050812);
    border-radius: 18px;
    padding: 1.3rem 1.5rem;
    border: 1px solid rgba(255,255,255,0.12);
    box-shadow: 0 12px 35px rgba(0,0,0,0.5);
}

.stat-title {
    font-size: .85rem;
    color: #c7ccff;
}

.stat-value {
    font-size: 2rem;
    font-weight: 900;
    color: #ffd86b;
}

.stat-sub {
    font-size: .8rem;
    color: #9da4d1;
}

.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 1.25rem;
}

.card-glass {
    background: rgba(255,255,255,0.06);
    backdrop-filter: blur(15px);
    border-radius: 20px;
    padding: 1.7rem;
    width: 100%;
    border: 1px solid rgba(255,255,255,0.12);
}

.quick-btn {
    padding: .7rem;
    border-radius: 12px;
    font-weight: 600;
}

.table-dark thead {
    background: rgba(255,255,255,0.05);
}
</style>


<div class="dashboard-wrapper">

    <!-- Ø¹Ù†ÙˆØ§Ù† -->
    <div class="card-glass mb-4 d-flex justify-content-between align-items-center">
        <div>
            <h2 class="fw-bold mb-1">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
            <p class="text-muted small mb-0">
                Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸ‘‹ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù† Ù‡Ù†Ø§.
            </p>
        </div>

        <a href="{{ url_for('admin_logout') }}"
           class="btn btn-outline-light btn-sm">
            ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        </a>
    </div>

    <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
    <div class="dashboard-grid mb-4">
        <div class="stat-card">
            <div class="stat-title">Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨</div>
            <div class="stat-value">{{ stats.students }}</div>
            <div class="stat-sub">Ø·Ø§Ù„Ø¨</div>
        </div>

        <div class="stat-card">
            <div class="stat-title">Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯</div>
            <div class="stat-value">{{ stats.subjects }}</div>
            <div class="stat-sub">Ù…Ø§Ø¯Ø©</div>
        </div>

        <div class="stat-card">
            <div class="stat-title">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</div>
            <div class="stat-value">{{ stats.questions }}</div>
            <div class="stat-sub">Ø³Ø¤Ø§Ù„</div>
        </div>

        <div class="stat-card">
            <div class="stat-title">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</div>
            <div class="stat-value">{{ stats.results }}</div>
            <div class="stat-sub">Ù…Ø­Ø§ÙˆÙ„Ø©</div>
        </div>
    </div>

    <!-- Ø¹Ù…Ù„ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© -->
    <div class="card-glass mb-4">
        <h5 class="fw-bold mb-3">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h5>

        <div class="d-grid gap-2">
            <a href="{{ url_for('admin_subjects') }}"
               class="btn btn-gold quick-btn">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯</a>

            <a href="{{ url_for('admin_upload') }}"
               class="btn btn-outline-light quick-btn">Ø±ÙØ¹ Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</a>

            <a href="{{ url_for('admin_students') }}"
               class="btn btn-outline-light quick-btn">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</a>

            <a href="{{ url_for('admin_results') }}"
               class="btn btn-outline-light quick-btn">Ø³Ø¬Ù„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª</a>
        </div>
    </div>

    <!-- Ø¢Ø®Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div class="card-glass">
        <h5 class="fw-bold mb-3">Ø¢Ø®Ø± Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨</h5>

        {% if recent %}
        <div class="table-responsive">
            <table class="table table-dark table-hover table-sm align-middle mb-0">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                        <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
                        <th>Ø§Ù„Ø¹Ù„Ø§Ù…Ø©</th>
                        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in recent %}
                    <tr>
                        <td>{{ r.student_name }}</td>
                        <td>{{ r.subject_name }}</td>
                        <td>
                            <span class="badge bg-success-subtle text-success fw-semibold">
                                {{ "%.0f"|format(r.score) }}%
                            </span>
                        </td>
                        <td class="text-muted small">{{ r.date }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p class="text-center text-muted small">
            Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯.
        </p>
        {% endif %}
    </div>

</div>

{% endblock %}