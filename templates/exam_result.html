{% extends "base.html" %}
{% block title %}Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†{% endblock %}

{% block content %}
<div class="result-card">

    <!-- Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
    <div class="score-ring">
        <div class="ring" style="--percent: {{ result.score|round(0) }}">
            <span class="score-text">{{ result.score|round(0) }}%</span>
        </div>
    </div>

    <!-- Ø´Ø§Ø±Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
    {% if result.score >= 90 %}
        <div class="result-badge badge-excellent">ğŸŒŸ Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ø§Ù‹!</div>
    {% elif result.score >= 70 %}
        <div class="result-badge badge-good">ğŸ‘ Ù†ØªÙŠØ¬Ø© Ø¬ÙŠÙ‘Ø¯Ø©</div>
    {% elif result.score >= 50 %}
        <div class="result-badge badge-acceptable">ğŸ™‚ Ù†ØªÙŠØ¬Ø© Ù…Ù‚Ø¨ÙˆÙ„Ø©</div>
    {% else %}
        <div class="result-badge badge-fail">ğŸ˜¢ ØªØ­ØªØ§Ø¬ Ù„ØªØ­Ø³ÙŠÙ†</div>
    {% endif %}

    <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
    <div class="result-stats">
        <div class="stat-box green">
            <div class="num">{{ result.correct_count }}</div>
            <div class="label">Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©</div>
        </div>

        <div class="stat-box red">
            <div class="num">{{ result.wrong_count }}</div>
            <div class="label">Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©</div>
        </div>
    </div>

    <!-- Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª -->
    <h4 class="answers-title">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</h4>

    <div class="answers-list">
        {% for a in answers %}
        <div class="answer-item {% if a.is_correct %}correct{% else %}wrong{% endif %}">
            <div class="q-text">{{ loop.index }}. {{ a.text }}</div>

            <div class="q-details">
                <div><strong>Ø¥Ø¬Ø§Ø¨ØªÙƒ:</strong>
                    <span class="{% if a.is_correct %}text-success{% else %}text-danger{% endif %}">
                        {% if a.student_answer == '1' %}{{ a.option1 }}
                        {% elif a.student_answer == '2' %}{{ a.option2 }}
                        {% elif a.student_answer == '3' %}{{ a.option3 }}
                        {% elif a.student_answer == '4' %}{{ a.option4 }}
                        {% endif %}
                    </span>
                </div>

                <div><strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</strong>
                    <span class="text-success fw-bold">
                        {% if a.correct_option == '1' %}{{ a.option1 }}
                        {% elif a.correct_option == '2' %}{{ a.option2 }}
                        {% elif a.correct_option == '3' %}{{ a.option3 }}
                        {% elif a.correct_option == '4' %}{{ a.option4 }}
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Ø£Ø²Ø±Ø§Ø± -->
    <div class="d-flex flex-wrap gap-2 justify-content-center my-3">

    <!-- Ø²Ø± Ø¹Ø±Ø¶ ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© (HTML) -->
    <a href="{{ url_for('exam_result_pdf', result_id=result.id) }}"
       class="btn btn-outline-light">
        ğŸ–¨ Ø¹Ø±Ø¶ ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
    </a>

    
</div>
{% endblock %}