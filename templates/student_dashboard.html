{% extends "base.html" %}
{% block title %}ููุญุฉ ุงูุทุงูุจ{% endblock %}

{% block content %}

<div class="dashboard-card">

    <!-- ===== ูุนูููุงุช ุงูุทุงูุจ ===== -->
    <div class="profile-box">

        <div class="avatar-container">
            <img src="{{ url_for('static', filename='avatar.png') }}" class="student-avatar">

            {% if total_exams > 0 %}
                {% set last_score = results[0].score %}

                {% if last_score >= 90 %}
                    <div class="badge-rank rank-excellent">ููุชุงุฒ</div>
                {% elif last_score >= 70 %}
                    <div class="badge-rank rank-good">ุฌููุฏ</div>
                {% elif last_score >= 50 %}
                    <div class="badge-rank rank-ok">ููุจูู</div>
                {% else %}
                    <div class="badge-rank rank-weak">ุถุนูู</div>
                {% endif %}
            {% endif %}
        </div>

        <h2 class="student-name">{{ student.full_name }}</h2>

        <p class="grade-text">
            ุงูุตู ุงููุณุฌููู: {{ student.grade }}
        </p>

        <!-- ุฅุญุตุงุฆูุงุช ุนุงูุฉ -->
        <div class="stats-row">

            <div class="stat-item">
                <div class="stat-number">{{ total_exams }}</div>
                <div class="stat-label">ุนุฏุฏ ุงูุงูุชุญุงูุงุช</div>
            </div>

            <div class="stat-item">
                <div class="stat-number">{{ total_correct }}</div>
                <div class="stat-label">ุฅุฌุงุจุงุช ุตุญูุญุฉ</div>
            </div>

            <div class="stat-item">
                <div class="stat-number">{{ total_wrong }}</div>
                <div class="stat-label">ุฅุฌุงุจุงุช ุฎุงุทุฆุฉ</div>
            </div>

        </div>

        <a href="{{ url_for('choose_grade') }}" class="btn btn-gold w-100 mt-3">
            ๐ ุชุบููุฑ ุงูุตู/ุงููุณุงุฑ/ุงููุตู
        </a>

    </div>

    <!-- ===== ุณุฌู ุงูุงูุชุญุงูุงุช ===== -->
    <div class="results-box">

        <h3 class="section-title">ุณุฌู ุงูุงูุชุญุงูุงุช</h3>

        {% if results %}
            {% for r in results %}
            <div class="result-item">

                <div class="result-left">
                    <h4 class="subject-name">{{ r.subject_name }}</h4>
                    <p class="result-date">{{ r.date }}</p>
                </div>

                <div class="result-right">
                    <div class="score-circle">{{ r.score|round(0) }}%</div>
                    <div class="correct-wrong">
                        <span class="correct">โ {{ r.correct }}</span>
                        <span class="wrong">โ {{ r.wrong }}</span>
                    </div>
                </div>

            </div>
            {% endfor %}
        {% else %}
            <p class="text-center text-muted mb-0">ูุง ุชูุฌุฏ ุงูุชุญุงูุงุช ุจุนุฏ.</p>
        {% endif %}

        <a href="{{ url_for('student_subjects') }}" class="btn btn-outline-light w-100 mt-3">
            ๐ ุนุฑุถ ุงูููุงุฏ ุงููุชุงุญุฉ
        </a>

    </div>

</div>

{% endblock %}